(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48d5c5e6"],{"1f69":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"white p20"},[a("div",{staticClass:"header_btn"},[a("el-button",{attrs:{size:"mini"}},[e._v("保存")]),a("el-button",{attrs:{size:"mini"}},[e._v("完工验收")]),a("el-button",{attrs:{size:"mini"}},[e._v("任务进度")])],1),a("el-form",{ref:"form",staticClass:"page_form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"设备编号:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"设备名称:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"故障类型:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"任务等级:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"要求完成时间:",prop:"beginTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.beginTime,callback:function(t){e.$set(e.form,"beginTime",t)},expression:"form.beginTime"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"故障描述:",prop:"reason"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"照片上传:",prop:"desc"}},[a("el-upload",{attrs:{action:e.uploadUrl,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-success":e.uploadSuccess,"on-progress":e.onUploadProgress,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1),a("el-form-item",{attrs:{label:"责任人:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"抄送人:",prop:"targetList"}},[a("el-select",{class:!0===e.pageStatus?"dis_input":"",attrs:{multiple:"",filterable:"",placeholder:"请选择",disabled:e.pageStatus},model:{value:e.form.ccList,callback:function(t){e.$set(e.form,"ccList",t)},expression:"form.ccList"}},e._l(e.getUserList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("p",{staticClass:"xian"}),a("el-form-item",{attrs:{label:"设备类别:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"规格型号:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"安装地点:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"保修时间:",prop:"endTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),a("el-form-item",{attrs:{label:"保修人:",prop:"endTime"}},[e._v("\n            王明\n        ")]),a("el-form-item",{attrs:{label:"故障类型:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1),a("p",{staticStyle:{"line-height":"40px"}},[e._v("维修记录")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实际开工时间:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实际完工时间:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"故障类型:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备停机时间:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),a("el-form-item",{attrs:{label:"故障原因:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1),a("el-form-item",{attrs:{label:"维修方案:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1),a("el-form-item",{attrs:{label:"维修工时:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1),a("el-form-item",{attrs:{label:"完工拍照:",prop:"timeArea"}},[a("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入时长(必填)"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1)],1),a("div",[e._v("\n        选择备件"),a("el-button",{attrs:{size:"mini"}},[e._v("选择备件")]),a("el-table",{staticClass:"theme mt-20",staticStyle:{width:"100%"},attrs:{data:e.dataList}},[a("el-table-column",{attrs:{prop:"title",label:"备件编号"}}),a("el-table-column",{attrs:{prop:"statusName",label:"备件名称"}}),a("el-table-column",{attrs:{prop:"heldPersonName",label:"备件型号"}}),a("el-table-column",{attrs:{prop:"deptName",label:"使用数量"}}),a("el-table-column",{attrs:{prop:"expireDate",label:"单位"}}),a("el-table-column",{attrs:{prop:"checkTime",label:"单价"}}),a("el-table-column",{attrs:{prop:"applyPersonName","show-overflow-tooltip":"",label:"金额"}}),a("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":"",label:"库位"}}),a("el-table-column",{attrs:{prop:"taskNo","show-overflow-tooltip":"",label:"备注"}})],1),a("el-pagination",{attrs:{"current-page":e.pg.pageno,"page-sizes":[10,20,30,40,50,100],"page-size":e.pg.pagesize,layout:"prev, pager, next,sizes",total:e.allTotal,small:!0},on:{"update:currentPage":function(t){return e.$set(e.pg,"pageno",t)},"update:current-page":function(t){return e.$set(e.pg,"pageno",t)},"size-change":e.sizeChange,"current-change":e.currentChange}})],1),a("el-dialog",{attrs:{title:"请选择抄送人",visible:e.checkToDialog,width:"30%","show-close":""},on:{"update:visible":function(t){e.checkToDialog=t}}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.getUserList,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.backfillArr,"filter-node-method":e.filterNode},on:{"check-change":e.handleCheckChange}})],1),a("el-col",{attrs:{span:12}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkToDialog=!1}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},l=[],i=(a("7f7f"),{data:function(){var e=function(e,t,a){var r=/^[0-9]+.?[0-9]*$/;if(!r.test(t))return a(new Error("请输入数字"));a()},t=function(e,t,a){if(t.length<1)return a(new Error("请选择抄送人"));a()};return{uploadUrl:this.UploadEnc,form:{targetList:[],taglocationappearanceImage:[]},rules:{type:[{required:!0,message:"请选择请假类型",trigger:"change"}],beginTime:[{required:!0,message:"请选择开始日期",trigger:"change"}],endTime:[{required:!0,message:"请选择结束日期",trigger:"change"}],reason:[{required:!0,message:"请填写请假事由",trigger:"blur"}],timeArea:[{required:!0,message:"请填写时长",trigger:"blur"},{validator:e,trigger:"blur"}],targetList:[{required:!0,validator:t,trigger:"blur"}]},checkToDialog:!1,getUserList:[],getType:[],filterText:"",defaultProps:{children:"children",label:"name"},personArr:[],backfillArr:[],dialogImageUrl:"",dialogVisible:!1,dataList:[],pg:{pageno:1,pagesize:10},allTotal:0}},methods:{sizeChange:function(){},currentChange:function(){},handleRemove:function(e,t){this.form.taglocationappearanceImage.push(this.form.taglocationappearanceImage.indexOf(e.url),1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadSuccess:function(e,t,a){0===e.code?this.form.taglocationappearanceImage.push(e.fileName):this.$msg.e(e.msg)},onUploadProgress:function(e,t,a){},copyTo:function(){if(this.checkToDialog=!0,this.personArr.length>0)for(var e=0;e<this.personArr.length;e++)this.backfillArr.push(this.personArr[e].user_id)},handleCheckChange:function(e,t,a){!0===t?this.personArr.push(e):!1===t&&this.personArr.splice(this.personArr.indexOf(e),1)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;for(var r=0;r<t.personArr.length;r++)t.form.targetList.push(t.personArr[r].id);a.leaveApplySubmit(a.form).then(function(e){0===e.code?a.$router.push({path:"/leave_list"}):a.$msg.e(e.msg)})})},initialize:function(){var e=this;this.commonGetUser().then(function(t){0===t.code&&(e.getUserList=t.datas)}),this.dictGetDictsByTpe({type:"leave_apply_type"}).then(function(t){0===t.code&&(e.getType=t.datas)})}},mounted:function(){var e=this;this.$route.query&&this.$route.query.id&&this.leaveApplyDetail({id:this.$route.query.id}).then(function(t){if(0===t.code&&(e.form=t.leaveApply,e.form.targetList=t.targetList,e.personArr=t.targetList,t.initFileList&&t.initFileList.length>0)){e.form.taglocationappearanceImage=[];for(var a=0;a<t.initFileList.length;a++)e.form.taglocationappearanceImage.push(t.initFileList[a].filePath)}}),this.initialize()},watch:{filterText:function(e){this.$refs.tree.filter(e)}}}),o=i,s=(a("bb80"),a("2877")),n=Object(s["a"])(o,r,l,!1,null,"0ad67f09",null);t["default"]=n.exports},"4eae":function(e,t,a){},"7f7f":function(e,t,a){var r=a("86cc").f,l=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in l||a("9e1e")&&r(l,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},bb80:function(e,t,a){"use strict";var r=a("4eae"),l=a.n(r);l.a}}]);