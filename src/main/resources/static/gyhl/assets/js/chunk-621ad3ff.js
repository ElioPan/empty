(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-621ad3ff"],{"0f1f":function(e,t,i){"use strict";var a=i("f294"),n=i.n(a);n.a},"8c5d":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-box"},[i("div",{staticClass:"header_search mt-20"},[i("p",[e._v("\n            请假人：\n            "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.pg.userId,callback:function(t){e.$set(e.pg,"userId",t)},expression:"pg.userId"}},e._l(e.getUserList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v("\n            部门：\n            "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.pg.deptId,callback:function(t){e.$set(e.pg,"deptId",t)},expression:"pg.deptId"}},e._l(e.deparmentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("el-button",{staticClass:"r",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:e.newLeave}},[e._v("新建")]),i("el-button",{staticClass:"r",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:e.batchDelete}},[e._v("删除")]),i("el-button",{staticClass:"r",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.initialize()}}},[e._v("提交")]),e.more?e._e():i("a",{staticClass:"more_a r",on:{click:function(t){e.more=!e.more}}},[e._v("更多查询"),i("i",{staticClass:"el-icon-caret-bottom"})]),e.more?i("a",{staticClass:"more_a r",on:{click:function(t){e.more=!e.more}}},[e._v("收起查询"),i("i",{staticClass:"el-icon-caret-top"})]):e._e()],1),e.more?i("p",[e._v("\n            开始日期：\n            "),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:e.initialize},model:{value:e.pg.beginTime,callback:function(t){e.$set(e.pg,"beginTime",t)},expression:"pg.beginTime"}}),e._v("\n            结束日期：\n            "),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:e.initialize},model:{value:e.pg.endTime,callback:function(t){e.$set(e.pg,"endTime",t)},expression:"pg.endTime"}}),e._v("\n            请假类型：\n            "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.pg.type,callback:function(t){e.$set(e.pg,"type",t)},expression:"pg.type"}},e._l(e.getType,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e()]),i("el-table",{staticClass:"theme mt-20",staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""},on:{"selection-change":e.ckAll}},[i("el-table-column",{attrs:{type:"selection",width:"50"}}),i("el-table-column",{attrs:{prop:"createuser",width:"100",label:"填报人"}}),i("el-table-column",{attrs:{prop:"typename",width:"100",label:"请假类型"}}),i("el-table-column",{attrs:{prop:"timearea",width:"120",label:"请假市场(小时)"}}),i("el-table-column",{attrs:{prop:"reason","show-overflow-tooltip":"",label:"请假事由"}}),i("el-table-column",{attrs:{prop:"begintime","show-overflow-tooltip":"",label:"请假开始时间"}}),i("el-table-column",{attrs:{prop:"endtime","show-overflow-tooltip":"",label:"请假结束时间"}}),i("el-table-column",{attrs:{prop:"statusname",label:"状态"}}),i("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.del(t.row.id)}}},[e._v("删除")]),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.$router.push({path:"/add_leave",query:{id:t.row.id}})}}},[e._v("详情\n                ")]),t.row.assignid===e.userId?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.examine(t.row.id)}}},[e._v("审批")]):e._e()]}}])})],1),i("el-pagination",{attrs:{"current-page":e.pg.pageno,"page-sizes":[10,20,30,40,50,100],"page-size":e.pg.pagesize,layout:"prev, pager, next,sizes",total:e.allTotal,small:!0},on:{"update:currentPage":function(t){return e.$set(e.pg,"pageno",t)},"update:current-page":function(t){return e.$set(e.pg,"pageno",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],s=(i("ac6a"),{name:"LeaveList",data:function(){return{more:!1,dataList:[],options:[],value:"",pg:{pageno:1,pagesize:10,userId:"",username:"",deptId:"",approveUserId:""},allTotal:0,getType:[],getUserList:[],deparmentList:[],ckList:[],userId:JSON.parse(sessionStorage.getItem("userInfo")).userId}},methods:{ckAll:function(e){var t=this;this.ckList=[],e.forEach(function(e){t.ckList.push(e.id)})},examine:function(e){var t=this,i=this;this.$confirm("请确定审批是否通过？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"通过",cancelButtonText:"不通过"}).then(function(){t.leaveApplyApprove({leaveApplyId:e,isApproved:1}).then(function(e){0===e.code?(i.$msg.s(e.msg),i.initialize()):i.$msg.e(e.msg)})}).catch(function(a){t.$prompt("拒绝原因：").then(function(a){t.leaveApplyApprove({leaveApplyId:e,isApproved:0,reason:a.value}).then(function(e){0===e.code?(i.$msg.s(e.msg),i.initialize()):i.$msg.e(e.msg)})})})},batchDelete:function(){var e=this;this.ckList.length>0?this.leaveApplyBatchRemove({ids:e.ckList}).then(function(t){0===t.code?(e.$msg.s(t.msg),e.initialize()):e.$msg.e(t.msg)}):e.$msg.e("请选择批量删除的数据")},del:function(e){var t=this;this.leaveApplyRemove({id:e}).then(function(e){0===e.code?(t.$msg.s(e.msg),t.initialize()):t.$msg.e(e.msg)})},newLeave:function(){this.$router.push({path:"/add_leave"})},initialize:function(){var e=this;this.leaveApplyList(e.pg).then(function(t){0===t.code&&(e.dataList=t.data?t.data.datas:[],e.allTotal=t.data?t.data.totalRows:0)})},inquire:function(){var e=this;this.dictGetDictsByTpe({type:"leave_apply_type"}).then(function(t){0===t.code&&(e.getType=t.datas)}),this.commonGetDepts().then(function(t){0===t.code&&(e.deparmentList=t.datas)}),this.commonGetUser().then(function(t){0===t.code&&(e.getUserList=t.datas)})},handleSizeChange:function(e){this.pg.pagesize=e,this.initialize()},handleCurrentChange:function(e){this.pg.pageno=e,this.initialize()}},mounted:function(){this.initialize(),this.inquire()}}),l=s,o=(i("0f1f"),i("2877")),r=Object(o["a"])(l,a,n,!1,null,"7a18110f",null);t["default"]=r.exports},ac6a:function(e,t,i){for(var a=i("cadf"),n=i("0d58"),s=i("2aba"),l=i("7726"),o=i("32e9"),r=i("84f2"),c=i("2b4c"),p=c("iterator"),u=c("toStringTag"),d=r.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=n(m),h=0;h<g.length;h++){var f,v=g[h],y=m[v],b=l[v],L=b&&b.prototype;if(L&&(L[p]||o(L,p,d),L[u]||o(L,u,v),r[v]=d,y))for(f in a)L[f]||s(L,f,a[f],!0)}},f294:function(e,t,i){}}]);