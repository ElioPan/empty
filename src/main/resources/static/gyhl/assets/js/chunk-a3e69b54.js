(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3e69b54"],{"11e9":function(e,t,r){var i=r("52a7"),a=r("4630"),o=r("6821"),n=r("6a99"),s=r("69a8"),l=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=o(e),t=n(t,!0),l)try{return c(e,t)}catch(r){}if(s(e,t))return a(!i.f.call(e,t),e[t])}},"4ea7":function(e,t,r){},"5dbc":function(e,t,r){var i=r("d3f4"),a=r("8b97").set;e.exports=function(e,t,r){var o,n=t.constructor;return n!==r&&"function"==typeof n&&(o=n.prototype)!==r.prototype&&i(o)&&a&&a(e,o),e}},"7f7f":function(e,t,r){var i=r("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,n="name";n in a||r("9e1e")&&i(a,n,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"8b97":function(e,t,r){var i=r("d3f4"),a=r("cb7c"),o=function(e,t){if(a(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:i(e,r),e}}({},!1):void 0),check:o}},9093:function(e,t,r){var i=r("ce10"),a=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,a)}},"9b24":function(e,t,r){"use strict";var i=r("4ea7"),a=r.n(i);a.a},aa77:function(e,t,r){var i=r("5ca1"),a=r("be13"),o=r("79e5"),n=r("fdef"),s="["+n+"]",l="​",c=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),f=function(e,t,r){var a={},s=o(function(){return!!n[e]()||l[e]()!=l}),c=a[e]=s?t(u):n[e];r&&(a[r]=c),i(i.P+i.F*s,"String",a)},u=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(p,"")),e};e.exports=f},c0b1:function(e,t,r){e.exports=r.p+"assets/img/moren_person.png"},c5f6:function(e,t,r){"use strict";var i=r("7726"),a=r("69a8"),o=r("2d95"),n=r("5dbc"),s=r("6a99"),l=r("79e5"),c=r("9093").f,p=r("11e9").f,f=r("86cc").f,u=r("aa77").trim,m="Number",h=i[m],d=h,g=h.prototype,y=o(r("2aeb")(g))==m,b="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():u(t,3);var r,i,a,o=t.charCodeAt(0);if(43===o||45===o){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+t}for(var n,l=t.slice(2),c=0,p=l.length;c<p;c++)if(n=l.charCodeAt(c),n<48||n>a)return NaN;return parseInt(l,i)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof h&&(y?l(function(){g.valueOf.call(r)}):o(r)!=m)?n(new d(v(t)),r,h):v(t)};for(var _,A=r("9e1e")?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;A.length>I;I++)a(d,_=A[I])&&!a(h,_)&&f(h,_,p(d,_));h.prototype=g,g.constructor=h,r("2aba")(i,m,h)}},fa8a:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"white p20"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),i("el-breadcrumb-item",[e._v("费用报销")])],1),i("el-form",{ref:"form",staticClass:"page_form",staticStyle:{"margin-top":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[e._l(e.form.reimApplyItems,function(t,r){return i("div",[i("h4",[e._v("报销明细"+e._s(r+1))]),i("el-form-item",{attrs:{label:"报销金额(元):"}},[i("el-input",{staticClass:"width-22",attrs:{placeholder:"请输入金额(必填)"},on:{blur:e.allMoneyFun},model:{value:t.reiCount,callback:function(r){e.$set(t,"reiCount",r)},expression:"item.reiCount"}})],1),i("el-form-item",{attrs:{label:"日期:"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.reiDate,callback:function(r){e.$set(t,"reiDate",r)},expression:"item.reiDate"}})],1),i("el-form-item",{attrs:{label:"类别:"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type,callback:function(r){e.$set(t,"type",r)},expression:"item.type"}},e._l(e.getType,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"费用明细:"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.reiItemDescription,callback:function(r){e.$set(t,"reiItemDescription",r)},expression:"item.reiItemDescription"}})],1)],1)}),i("el-button",{on:{click:e.addDetail}},[e._v("增加报销明细")]),e.allMoney>0?i("h5",[e._v("总报销金额(元)："+e._s(e.allMoney))]):e._e(),i("el-form-item",{attrs:{label:"图片:",prop:"desc"}},[i("el-upload",{attrs:{action:e.uploadUrl,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-success":e.uploadSuccess,"on-progress":e.onUploadProgress,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form-item",{attrs:{label:"发给谁:",prop:"targetList"}},[e._l(e.personArr,function(t){return e.personArr.length>0?i("el-col",{staticClass:"tac",attrs:{span:2}},[i("a",{on:{click:e.copyTo}},[i("img",{attrs:{src:r("c0b1"),alt:""}})]),i("p",[e._v(e._s(t.name))])]):e._e()}),i("el-col",{staticClass:"yuan tac",attrs:{span:2}},[i("a",{on:{click:e.copyTo}},[e._v("+")]),i("p",[e._v("添加人")])])],2),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm2()}}},[e._v("暂存")])],1)],2),i("el-dialog",{attrs:{title:"请选择抄送人",visible:e.checkToDialog,width:"30%","show-close":""},on:{"update:visible":function(t){e.checkToDialog=t}}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),i("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.getUserList,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.backfillArr,"filter-node-method":e.filterNode},on:{"check-change":e.handleCheckChange}})],1),i("el-col",{attrs:{span:12}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkToDialog=!1}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},a=[],o=(r("7f7f"),r("c5f6"),{name:"AddLeave",data:function(){return{uploadUrl:this.UploadEnc,form:{targetList:[],taglocationappearanceImage:[],reimApplyItems:[]},rules:{},checkToDialog:!1,getUserList:[],getType:[],filterText:"",defaultProps:{children:"children",label:"name"},personArr:[],backfillArr:[],dialogImageUrl:"",dialogVisible:!1,detailList:0,allMoney:0}},methods:{allMoneyFun:function(e){this.allMoney=0;for(var t=0;t<this.form.reimApplyItems.length;t++)this.allMoney+=Number(this.form.reimApplyItems[t].type)},addDetail:function(){var e={type:"",reiCount:"",reiDate:"",reiltemDescription:""};this.form.reimApplyItems.push(e)},handleRemove:function(e,t){this.form.taglocationappearanceImage.push(this.form.taglocationappearanceImage.indexOf(e.url),1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadSuccess:function(e,t,r){0===e.code?this.form.taglocationappearanceImage.push(e.fileName):this.$msg.e(e.msg)},onUploadProgress:function(e,t,r){},copyTo:function(){if(this.checkToDialog=!0,this.personArr.length>0)for(var e=0;e<this.personArr.length;e++)this.backfillArr.push(this.personArr[e].user_id)},handleCheckChange:function(e,t,r){!0===t?this.personArr.push(e):!1===t&&this.personArr.splice(this.personArr.indexOf(e),1)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return!1;for(var i=0;i<t.personArr.length;i++)t.form.targetList.push(t.personArr[i].id);r.form.reimApplyItems=JSON.stringify(r.form.reimApplyItems),r.reimApplySubmit(r.form).then(function(e){0===e.code?r.$router.push({path:"/apply_list"}):r.$msg.e(e.msg)})})},submitForm2:function(){for(var e=this,t=0;t<this.personArr.length;t++)this.form.targetList.push(this.personArr[t].id);e.form.reimApplyItems=JSON.stringify(e.form.reimApplyItems),e.reimApplyTempSave(e.form).then(function(t){0===t.code?e.$router.push({path:"/apply_list"}):e.$msg.e(t.msg)})},initialize:function(){var e=this;this.commonGetUser().then(function(t){0===t.code&&(e.getUserList=t.datas)}),this.dictGetDictsByTpe({type:"reim_apply_type"}).then(function(t){0===t.code&&(e.getType=t.datas)})}},mounted:function(){var e=this;this.$route.query&&this.$route.query.id&&this.leaveApplyDetail({id:this.$route.query.id}).then(function(t){if(0===t.code&&(e.form=t.leaveApply,e.form.targetList=t.targetList,e.personArr=t.targetList,t.initFileList&&t.initFileList.length>0)){e.form.taglocationappearanceImage=[];for(var r=0;r<t.initFileList.length;r++)e.form.taglocationappearanceImage.push(t.initFileList[r].filePath)}}),this.initialize(),this.addDetail()},watch:{filterText:function(e){this.$refs.tree.filter(e)}}}),n=o,s=(r("9b24"),r("2877")),l=Object(s["a"])(n,i,a,!1,null,"13373f06",null);t["default"]=l.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);