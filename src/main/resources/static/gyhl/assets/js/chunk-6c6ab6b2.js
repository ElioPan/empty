(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c6ab6b2"],{"7f7f":function(e,t,r){var i=r("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in n||r("9e1e")&&i(n,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},b359:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"header_btn"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.save("form")}}},[e._v("提交")]),r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$router.push({path:"/task_list"})}}},[e._v("取消\n        ")])],1),r("el-form",{ref:"form",staticClass:"page_form white mt-20",attrs:{model:e.form,rules:e.ruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"原因分析:",prop:"reason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请填写原因分析,右下角可拖动输入框"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),r("el-form-item",{attrs:{label:"解决方案:",prop:"solution"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请填写解决方案,右下角可拖动输入框"},model:{value:e.form.solution,callback:function(t){e.$set(e.form,"solution",t)},expression:"form.solution"}})],1),r("el-form-item",{attrs:{label:"验收人:",prop:"checkPerson"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.checkPerson,callback:function(t){e.$set(e.form,"checkPerson",t)},expression:"form.checkPerson"}},e._l(e.getUserList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"抄送人:",prop:"ccList"}},[r("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.del(t)}},model:{value:e.form.ccList,callback:function(t){e.$set(e.form,"ccList",t)},expression:"form.ccList"}},e._l(e.getUserList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),r("el-dialog",{staticClass:"theme",attrs:{title:"请选择抄送人",visible:e.checkToDialog,width:"30%","show-close":""},on:{"update:visible":function(t){e.checkToDialog=t}}},[r("SelectUser",{on:{dataArr:e.dataArr}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkToDialog=!1}}},[e._v("确 定")])],1)],1)],1)},n=[],s=(r("7f7f"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),r("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.getUserList,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.backfillArr,"filter-node-method":e.filterNode},on:{"check-change":e.handleCheckChange}})],1)}),o=[],l={name:"tree-grid",data:function(){return{getUserList:[],filterText:"",backfillArr:[],personArr:[],checkToDialog:!1,defaultProps:{children:"children",label:"name"}}},mounted:function(){this.initialize()},computed:{data:function(){}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleCheckChange:function(e,t,r){!0===t?this.personArr.push(e):!1===t&&this.personArr.splice(this.personArr.indexOf(e),1),this.$emit("dataArr",this.personArr)},initialize:function(){var e=this;this.commonGetUser().then(function(t){0===t.code&&(e.getUserList=t.datas)})}},watch:{filterText:function(e){this.$refs.tree.filter(e)}}},a=l,c=r("2877"),f=Object(c["a"])(a,s,o,!1,null,null,null),u=f.exports,h={data:function(){return{form:{ccList:[]},checkToDialog:!1,personArr:[],getUserList:[],ccArr:"",sel:0,ruleForm:{reason:[{required:!0,message:"请填写原因分析",trigger:"blur"}],solution:[{required:!0,message:"请填写原因分析",trigger:"blur"}]}}},methods:{save:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.form.taskid=r.$route.query.id,t.taskMainDealSave(r.form).then(function(e){0===e.code?(r.$msg.s(e.msg),r.$router.push({path:"/task_list"})):r.$msg.e(e.msg)})})},del:function(){this.ccArr.splice(this.ccArr.length-1,1)},dataArr:function(e){1===this.sel?this.ccArr=e:2===this.sel&&(this.personArr=e)},copyTo:function(){if(this.checkToDialog=!0,this.personArr.length>0)for(var e=0;e<this.personArr.length;e++)this.backfillArr.push(this.personArr[e].user_id)},handleCheckChange:function(e,t,r){!0===t?this.personArr.push(e):!1===t&&this.personArr.splice(this.personArr.indexOf(e),1)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initialize:function(){var e=this,t=this;this.commonGetUser().then(function(r){if(0===r.code){t.getUserList=r.datas;for(var i=0;i<r.datas.length;i++)e.$route.query.applyPersonName===r.datas[i].name&&(e.checkPerson=r.datas[i].id)}})}},mounted:function(){this.initialize()},components:{SelectUser:u},watch:{filterText:function(e){this.$refs.tree.filter(e)}}},d=h,p=Object(c["a"])(d,i,n,!1,null,"496ff6bc",null);t["default"]=p.exports}}]);