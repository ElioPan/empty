(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1847ef59"],{"4f35":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header_btn"},[t.pageStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.submit()}}},[t._v("处理")]):t._e(),t.pageStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.acceptance()}}},[t._v("验收")]):t._e(),t.pageStatus?t._e():a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.save("form")}}},[t._v("保存")]),t.pageStatus?t._e():a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$router.push({path:"/task_list"})}}},[t._v("取消")])],1),a("el-form",{ref:"form",staticClass:"page_form white mt-20",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"主题:"}},[a("el-input",{class:!0===t.pageStatus?"dis_input":"",attrs:{placeholder:"请填写标题内容",disabled:t.pageStatus},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"任务类型:",prop:"taskType"}},[a("el-select",{class:!0===t.pageStatus?"dis_input":"",attrs:{placeholder:"请选择",disabled:t.pageStatus},model:{value:t.form.taskType,callback:function(e){t.$set(t.form,"taskType",e)},expression:"form.taskType"}},t._l(t.typeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"任务等级:",prop:"taskLevel"}},[a("el-select",{class:!0===t.pageStatus?"dis_input":"",attrs:{placeholder:"请选择",disabled:t.pageStatus},model:{value:t.form.taskLevel,callback:function(e){t.$set(t.form,"taskLevel",e)},expression:"form.taskLevel"}},t._l(t.levelList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"要求完成时间:"}},[a("el-date-picker",{class:!0===t.pageStatus?"dis_input":"",attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH-mm-ss",disabled:t.pageStatus},model:{value:t.form.expireDate,callback:function(e){t.$set(t.form,"expireDate",e)},expression:"form.expireDate"}})],1)],1)],1),a("el-form-item",{attrs:{label:"详细描述:",prop:"detail"}},[a("el-input",{class:!0===t.pageStatus?"dis_input":"",attrs:{type:"textarea",disabled:t.pageStatus},model:{value:t.form.detail,callback:function(e){t.$set(t.form,"detail",e)},expression:"form.detail"}})],1),a("el-form-item",{attrs:{label:"照片上传:",prop:"desc"}},[t._l(t.form.initFileList,function(e){return t.pageStatus?[a("img",{attrs:{src:e.filePath,alt:""}})]:t._e()}),t.pageStatus?t._e():a("el-upload",{attrs:{action:t.uploadUrl,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-success":t.uploadSuccess,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})])],2),a("el-form-item",{attrs:{label:"责任人:"}},[a("el-col",{attrs:{span:12}},[a("el-select",{class:!0===t.pageStatus?"dis_input":"",attrs:{filterable:"",placeholder:"请选择",disabled:t.pageStatus},on:{change:t.geyDip},model:{value:t.form.heldPersonName,callback:function(e){t.$set(t.form,"heldPersonName",e)},expression:"form.heldPersonName"}},t._l(t.getUserList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-col",{attrs:{span:12}},[t._v("\n                责任部门：\n                "),a("el-input",{staticClass:"dis_input",attrs:{type:"text",disabled:""},model:{value:t.form.deptName,callback:function(e){t.$set(t.form,"deptName",e)},expression:"form.deptName"}})],1)],1),a("el-form-item",{attrs:{label:"抄送人:",prop:"ccList"}},[a("el-select",{class:!0===t.pageStatus?"dis_input":"",attrs:{multiple:"",filterable:"",placeholder:"请选择",disabled:t.pageStatus},model:{value:t.form.ccList,callback:function(e){t.$set(t.form,"ccList",e)},expression:"form.ccList"}},t._l(t.getUserList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t.pageStatus?a("p",{staticClass:"xian"}):t._e(),t.pageStatus?a("el-row",[a("el-col",{attrs:{span:8}},[t._v("\n                任务编号："+t._s(t.form.taskNo)+"\n            ")]),a("el-col",{attrs:{span:8}},[t._v("\n                处理状态："+t._s(t.form.statusName)+"\n            ")]),a("el-col",{attrs:{span:8}},[t._v("\n                发起人："+t._s(t.form.applyPersonName)+"\n            ")]),a("el-col",{attrs:{span:8}},[t._v("\n                关联单号："+t._s(t.form.linkOrderId)+"\n            ")]),a("el-col",{attrs:{span:8}},[t._v("\n                关联单据类型：\n            ")]),a("el-col",{attrs:{span:8}},[t._v("\n                发起时间："+t._s(t.form.createTime)+"\n            ")])],1):t._e(),t.pageStatus?a("h6",[t._v("回复内容")]):t._e(),t.pageStatus?a("el-table",{staticClass:"theme mt-20",staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""}},[a("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":"",label:"原因分析"}}),a("el-table-column",{attrs:{prop:"status",label:"解决方案"}}),a("el-table-column",{attrs:{prop:"heldpersonname",label:"回复人"}}),a("el-table-column",{attrs:{prop:"deptname",label:"回复时间"}})],1):t._e()],1),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},i=[],l=(a("7f7f"),a("ac6a"),{data:function(){return{uploadUrl:this.UploadEnc,form:{targetList:[],taglocationappearanceImage:[],deletetag_appearanceImage:[],initFileList:[]},rules:{},defaultProps:{children:"children",label:"name"},filterText:"",personArr:[],typeList:[],getUserList:[],dataList:[],ccArr:[],levelList:[],ptName:"",pageStatus:!1,dialogImageUrl:"",dialogVisible:!1}},methods:{save:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;e.taskMainSave(a.form).then(function(t){0===t.code?(a.$router.push({path:"/task_list"}),a.$msg.s(t.msg)):a.$msg.e(t.msg)})})},submit:function(){this.$router.push({path:"/dispose",query:{id:this.$route.query.id,taskNo:this.form.taskNo,applyPersonName:this.form.applyPersonName}})},acceptance:function(){this.$router.push({path:"/check_and_accept",query:{id:this.$route.query.id,taskNo:this.form.taskNo,applyPersonName:this.form.applyPersonName}})},geyDip:function(t){var e=this;this.getUserList.forEach(function(a){if(t===a.id)return e.form.deptId=a.deptId,void(e.form.deptName=a.deptName)})},handleRemove:function(t,e){"success"===t.status&&(this.form.deletetag_appearanceImage.push(res.response.fileName),this.form.taglocationappearanceImage.splice(this.form.taglocationappearanceImage.indexOf(res.response.fileName),1))},uploadSuccess:function(t,e){console.log(t),console.log(e),"操作成功"===t.msg&&this.form.taglocationappearanceImage.push(t.fileName)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleCheckChange:function(t,e,a){!0===e?this.personArr.push(t):!1===e&&this.personArr.splice(this.personArr.indexOf(t),1)},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},initialize:function(){var t=this;this.commonGetUser().then(function(e){0===e.code&&(t.getUserList=e.datas)}),this.dictGetDictsByTpe({type:"task_type"}).then(function(e){0===e.code&&(t.typeList=e.datas)}),this.dictGetDictsByTpe({type:"task_level"}).then(function(e){0===e.code&&(t.levelList=e.datas)})}},mounted:function(){var t=this;this.$route.query&&this.$route.query.id?(this.pageStatus=!0,this.taskMainDetail({id:this.$route.query.id}).then(function(e){if(0===e.code&&(t.form=e.taskMain,t.form.targetList=e.targetList,t.personArr=e.targetList,e.initFileList&&e.initFileList.length>0)){t.form.initFileList=[];for(var a=0;a<e.initFileList.length;a++)t.form.initFileList.push(e.initFileList[a].filePath)}})):this.pageStatus=!1,this.initialize()},watch:{filterText:function(t){this.$refs.tree.filter(t)}}}),r=l,o=a("2877"),n=Object(o["a"])(r,s,i,!1,null,null,null);e["default"]=n.exports},"7f7f":function(t,e,a){var s=a("86cc").f,i=Function.prototype,l=/^\s*function ([^ (]*)/,r="name";r in i||a("9e1e")&&s(i,r,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},ac6a:function(t,e,a){for(var s=a("cadf"),i=a("0d58"),l=a("2aba"),r=a("7726"),o=a("32e9"),n=a("84f2"),c=a("2b4c"),p=c("iterator"),u=c("toStringTag"),m=n.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(d),h=0;h<f.length;h++){var g,b=f[h],L=d[b],v=r[b],S=v&&v.prototype;if(S&&(S[p]||o(S,p,m),S[u]||o(S,u,b),n[b]=m,L))for(g in s)S[g]||l(S,g,s[g],!0)}}}]);